@{
    ViewData["Title"] = "Student Analysis";
    var courseNamesJson = System.Text.Json.JsonSerializer.Serialize(ViewBag.CourseNames);
    var studentCountsJson = System.Text.Json.JsonSerializer.Serialize(ViewBag.StudentCounts);
    var averageAgesJson = System.Text.Json.JsonSerializer.Serialize(ViewBag.AverageAges);
}

<h2 class="mt-3">ðŸ“Š Student Analysis Dashboard</h2>
<hr />

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div class="row">
    <div class="col-md-6">
        <h4>Students Per Course</h4>
        <canvas id="courseChart"></canvas>
    </div>

    <div class="col-md-6">
        <h4>Average Age Per Course</h4>
        <canvas id="ageChart"></canvas>
    </div>
</div>

<script>
    var courseNames = @Html.Raw(courseNamesJson);
    var studentCounts = @Html.Raw(studentCountsJson);
    var averageAges = @Html.Raw(averageAgesJson);

    new Chart(document.getElementById('courseChart'), {
        type: 'bar',
        data: {
            labels: courseNames,
            datasets: [{
                label: 'Students',
                data: studentCounts,
                borderWidth: 1
            }]
        }
    });

    new Chart(document.getElementById('ageChart'), {
        type: 'pie',
        data: {
            labels: courseNames,
            datasets: [{
                label: 'Average Age',
                data: averageAges
            }]
        }
    });
</script>
