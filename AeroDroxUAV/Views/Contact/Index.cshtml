@{
    ViewData["Title"] = "Contact Us - AeroDrox UAV";
}

<style>
    .contact-hero {
        background: linear-gradient(135deg, rgba(0, 0, 0, 0.85) 0%, rgba(0, 0, 0, 0.7) 100%), 
                    url('https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80') 
                    no-repeat center center;
        background-size: cover;
        color: white;
        padding: 80px 0 40px;
        text-align: center;
        border-radius: 0 0 20px 20px;
        margin-bottom: 30px;
    }
    
    .contact-container {
        background: white;
        border-radius: 15px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        margin-bottom: 30px;
    }
    
    .contact-sidebar {
        background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%);
        color: white;
        padding: 30px;
        height: 100%;
    }
    
    .contact-info-item {
        margin-bottom: 20px;
    }
    
    .contact-info-item i {
        width: 40px;
        height: 40px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 10px;
        font-size: 1rem;
    }
    
    .contact-form {
        padding: 30px;
    }
    
    .form-control-sm {
        border-radius: 8px;
        border: 2px solid #e0e0e0;
        padding: 10px 12px;
        font-size: 0.9rem;
        height: calc(2.5rem + 2px);
        transition: all 0.3s ease;
    }
    
    .form-control-sm:focus {
        border-color: #26d0ce;
        box-shadow: 0 0 0 0.2rem rgba(38, 208, 206, 0.25);
    }
    
    .form-control-sm.is-valid {
        border-color: #28a745;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath fill='%2328a745' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right calc(0.375em + 0.1875rem) center;
        background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
    }
    
    .form-control-sm.is-invalid {
        border-color: #dc3545;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right calc(0.375em + 0.1875rem) center;
        background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
    }
    
    .btn-sm-custom {
        background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%);
        border: none;
        color: white;
        padding: 10px 20px;
        font-size: 0.9rem;
        border-radius: 8px;
        font-weight: 600;
        transition: all 0.3s ease;
    }
    
    .btn-sm-custom:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(38, 208, 206, 0.3);
    }
    
    .btn-sm-custom:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }
    
    .small-map {
        height: 250px;
        border-radius: 10px;
        overflow: hidden;
        margin-top: 20px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .faq-section {
        margin-top: 40px;
    }
    
    .faq-item {
        margin-bottom: 15px;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        overflow: hidden;
    }
    
    .faq-question {
        padding: 15px;
        background: #f8f9fa;
        cursor: pointer;
        font-weight: 600;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.95rem;
    }
    
    .faq-answer {
        padding: 15px;
        display: none;
        font-size: 0.9rem;
    }
    
    .social-links a {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 35px;
        height: 35px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        margin-right: 8px;
        color: white;
        transition: all 0.3s ease;
    }
    
    .social-links a:hover {
        background: white;
        color: #1a2980;
        transform: translateY(-2px);
    }
    
    .alert-success {
        border-radius: 8px;
        border: none;
        background: linear-gradient(135deg, #20c997 0%, #17a2b8 100%);
        color: white;
        padding: 12px 15px;
        font-size: 0.9rem;
        animation: slideInDown 0.5s ease-out;
    }
    
    .alert-danger {
        border-radius: 8px;
        border: none;
        background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        color: white;
        padding: 12px 15px;
        font-size: 0.9rem;
        animation: slideInDown 0.5s ease-out;
    }
    
    .price-display {
        background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%);
        color: white;
        padding: 15px;
        border-radius: 10px;
        margin: 20px 0;
        text-align: center;
    }
    
    .price-tag {
        font-size: 1.2rem;
        font-weight: bold;
        margin: 0 5px;
    }
    
    .price-tag::before {
        content: '₹ ';
        font-weight: normal;
    }
    
    .form-select-sm {
        padding: 10px 12px;
        font-size: 0.9rem;
        border-radius: 8px;
        height: calc(2.5rem + 2px);
        border: 2px solid #e0e0e0;
        transition: all 0.3s ease;
    }
    
    .form-select-sm:focus {
        border-color: #26d0ce;
        box-shadow: 0 0 0 0.2rem rgba(38, 208, 206, 0.25);
    }
    
    .form-select-sm.is-valid {
        border-color: #28a745;
    }
    
    .form-select-sm.is-invalid {
        border-color: #dc3545;
    }
    
    textarea.form-control-sm {
        min-height: 120px;
        resize: vertical;
    }
    
    .validation-hint {
        font-size: 0.75rem;
        margin-top: 4px;
        color: #6c757d;
        display: none;
    }
    
    .validation-hint.show {
        display: block;
    }
    
    .validation-hint.valid {
        color: #28a745;
    }
    
    .validation-hint.invalid {
        color: #dc3545;
    }
    
    .character-count {
        font-size: 0.75rem;
        text-align: right;
        margin-top: 2px;
        color: #6c757d;
    }
    
    .character-count.warning {
        color: #ffc107;
    }
    
    .character-count.danger {
        color: #dc3545;
    }
    
    .loading-spinner {
        display: inline-block;
        width: 1rem;
        height: 1rem;
        border: 2px solid rgba(255,255,255,.3);
        border-radius: 50%;
        border-top-color: #fff;
        animation: spin 1s ease-in-out infinite;
        margin-right: 5px;
    }
    
    @@keyframes slideInDown {
        from {
            transform: translateY(-10px);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }
    
    @@keyframes spin {
        to { transform: rotate(360deg); }
    }
    
    .required-field::after {
        content: '*';
        color: #dc3545;
        margin-left: 4px;
    }
</style>

<!-- Hero Section -->
<section class="contact-hero">
    <div class="container">
        <h1 class="display-5 fw-bold mb-3">Contact Us</h1>
        <p class="lead mb-0">Get expert drone solutions tailored for India</p>
        <div class="price-display mt-3">
            <span class="price-tag">Call for pricing</span>
            <span class="mx-2">|</span>
            <span class="price-tag">Starting from ₹49,999</span>
        </div>
    </div>
</section>

<div class="container">
    <!-- Main Contact Container -->
    <div class="contact-container">
        <div class="row g-0">
            <!-- Contact Information Sidebar -->
            <div class="col-lg-5">
                <div class="contact-sidebar">
                    <h4 class="fw-bold mb-3">
                        <i class="fas fa-headset me-2"></i>Get In Touch
                    </h4>
                    <p class="mb-4 opacity-75 small">
                        Our Indian team is ready to assist you with drone solutions across India.
                    </p>
                    
                    <div class="contact-info-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <h6 class="fw-bold mb-2">Our India Office</h6>
                        <p class="mb-0 opacity-75 small">
                            Tech Park, Sector 62<br>
                            Noida, Uttar Pradesh 201301<br>
                            India
                        </p>
                    </div>
                    
                    <div class="contact-info-item">
                        <i class="fas fa-phone"></i>
                        <h6 class="fw-bold mb-2">Phone Numbers</h6>
                        <p class="mb-0 opacity-75 small">
                            <strong>Toll-Free:</strong> 1800-123-4567<br>
                            <strong>Sales:</strong> +91 98765 43210<br>
                            <strong>Support:</strong> +91 98765 43211
                        </p>
                    </div>
                    
                    <div class="contact-info-item">
                        <i class="fas fa-envelope"></i>
                        <h6 class="fw-bold mb-2">Email Address</h6>
                        <p class="mb-0 opacity-75 small">
                            <strong>India Sales:</strong> sales.in@@aerodrox.com<br>
                            <strong>Support:</strong> support.in@@aerodrox.com<br>
                            <strong>Careers:</strong> careers@@aerodrox.com
                        </p>
                    </div>
                    
                    <div class="contact-info-item">
                        <i class="fas fa-clock"></i>
                        <h6 class="fw-bold mb-2">Business Hours (IST)</h6>
                        <p class="mb-0 opacity-75 small">
                            <strong>Mon-Sat:</strong> 9:00 AM - 7:00 PM<br>
                            <strong>Sunday:</strong> 10:00 AM - 5:00 PM<br>
                            <strong>Emergency:</strong> 24/7 Available
                        </p>
                    </div>
                    
                    <div class="mt-4">
                        <h6 class="fw-bold mb-2">Follow Us</h6>
                        <div class="social-links">
                            <a href="#" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                            <a href="#" title="Twitter"><i class="fab fa-twitter"></i></a>
                            <a href="#" title="Instagram"><i class="fab fa-instagram"></i></a>
                            <a href="#" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                            <a href="#" title="YouTube"><i class="fab fa-youtube"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Contact Form -->
            <div class="col-lg-7">
                <div class="contact-form">
                    <h4 class="fw-bold mb-3">
                        <i class="fas fa-envelope me-2"></i>Send Message
                    </h4>
                    
                    @if(ViewBag.SuccessMessage != null)
                    {
                        <div class="alert alert-success mb-3">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-check-circle me-2"></i>
                                <div>
                                    <strong>Message Sent!</strong> @ViewBag.SuccessMessage
                                </div>
                            </div>
                        </div>
                    }
                    
                    @if(ViewBag.ErrorMessage != null)
                    {
                        <div class="alert alert-danger mb-3">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-exclamation-triangle me-2"></i>
                                <div>
                                    <strong>Error!</strong> @ViewBag.ErrorMessage
                                </div>
                            </div>
                        </div>
                    }
                    
                    <form method="post" asp-controller="Contact" asp-action="Submit" id="contactForm" novalidate>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="name" class="form-label fw-semibold small">
                                    <i class="fas fa-user me-1"></i>Your Name <span class="text-danger">*</span>
                                </label>
                                <input type="text" name="name" id="name" class="form-control form-control-sm" 
                                       placeholder="Enter your name" 
                                       maxlength="50"
                                       pattern="[a-zA-Z\s]{2,50}"
                                       title="Name must be 2-50 characters and contain only letters and spaces"
                                       value="@(ViewBag.FormData?.Name ?? "")"
                                       required>
                                <div class="validation-hint" id="nameHint">
                                    <i class="fas fa-info-circle"></i> 2-50 characters, letters and spaces only
                                </div>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="email" class="form-label fw-semibold small">
                                    <i class="fas fa-envelope me-1"></i>Email <span class="text-danger">*</span>
                                </label>
                                <input type="email" name="email" id="email" class="form-control form-control-sm" 
                                       placeholder="your@email.com"
                                       maxlength="254"
                                       value="@(ViewBag.FormData?.Email ?? "")"
                                       required>
                                <div class="validation-hint" id="emailHint">
                                    <i class="fas fa-info-circle"></i> Enter a valid email address
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="phone" class="form-label fw-semibold small">
                                    <i class="fas fa-phone me-1"></i>Phone
                                </label>
                                <input type="tel" name="phone" id="phone" class="form-control form-control-sm" 
                                       placeholder="+91 98765 43210"
                                       maxlength="15"
                                       value="@(ViewBag.FormData?.Phone ?? "")">
                                <div class="validation-hint" id="phoneHint">
                                    <i class="fas fa-info-circle"></i> Enter a valid phone number
                                </div>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="company" class="form-label fw-semibold small">
                                    <i class="fas fa-building me-1"></i>Company
                                </label>
                                <input type="text" name="company" id="company" class="form-control form-control-sm" 
                                       placeholder="Your company"
                                       maxlength="100"
                                       value="@(ViewBag.FormData?.Company ?? "")">
                                <div class="validation-hint" id="companyHint">
                                    <i class="fas fa-info-circle"></i> Max 100 characters
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="subject" class="form-label fw-semibold small">
                                <i class="fas fa-tag me-1"></i>Subject <span class="text-danger">*</span>
                            </label>
                            <select name="subject" id="subject" class="form-select form-select-sm" required>
                                @{
                                    var selectedSubject = ViewBag.FormData?.Subject as string;
                                }
                                <option value="" selected="@(string.IsNullOrEmpty(selectedSubject))">Select subject</option>
                                <option value="general" selected="@(selectedSubject == "general")">General Inquiry</option>
                                <option value="sales" selected="@(selectedSubject == "sales")">Sales & Pricing (₹)</option>
                                <option value="support" selected="@(selectedSubject == "support")">Technical Support</option>
                                <option value="service" selected="@(selectedSubject == "service")">Service Request</option>
                                <option value="training" selected="@(selectedSubject == "training")">Training (Starting ₹1,999)</option>
                                <option value="partnership" selected="@(selectedSubject == "partnership")">Partnership</option>
                                <option value="other" selected="@(selectedSubject == "other")">Other</option>
                            </select>
                            <div class="validation-hint" id="subjectHint">
                                <i class="fas fa-info-circle"></i> Please select a subject
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="message" class="form-label fw-semibold small">
                                <i class="fas fa-comment me-1"></i>Message <span class="text-danger">*</span>
                            </label>
                            <textarea name="message" id="message" rows="4" 
                                      class="form-control form-control-sm" 
                                      placeholder="Your message..." 
                                      minlength="10"
                                      maxlength="2000"
                                      required>@(ViewBag.FormData?.Message ?? "")</textarea>
                            <div class="d-flex justify-content-between">
                                <div class="validation-hint" id="messageHint">
                                    <i class="fas fa-info-circle"></i> 10-2000 characters
                                </div>
                                <div class="character-count" id="charCount">0/2000</div>
                            </div>
                        </div>
                        
                        <div class="mb-3 form-check">
                            <input type="checkbox" name="newsletter" id="newsletter" class="form-check-input" 
                                   value="true" @(ViewBag.FormData?.Newsletter == true ? "checked" : "")>
                            <label for="newsletter" class="form-check-label small">
                                Subscribe to our newsletter for updates and offers
                            </label>
                        </div>
                        
                        <div class="d-grid">
                            <button type="submit" class="btn btn-sm-custom" id="submitBtn">
                                <i class="fas fa-paper-plane me-2"></i>Send Message
                            </button>
                        </div>
                        
                        <p class="text-muted small mt-3 mb-0">
                            <i class="fas fa-info-circle me-1"></i>
                            <span class="text-danger">*</span> Required fields. Response within 24 hours.
                        </p>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Map Section -->
    <div class="small-map">
        <div class="ratio ratio-16x9 h-100">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3506.223073625087!2d77.36996637532938!3d28.496485875733513!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x390ce8aa1a22b7cd%3A0x4d4c5b4b4d4c5b4b!2sNoida%2C%20Uttar%20Pradesh!5e0!3m2!1sen!2sin!4v1623941212121!5m2!1sen!2sin" 
                    style="border:0;" allowfullscreen="" loading="lazy"></iframe>
        </div>
    </div>
    
    <!-- FAQ Section with Improved Toggle -->
    <div class="faq-section">
        <h4 class="text-center mb-4 fw-bold">
            <i class="fas fa-question-circle me-2"></i>Frequently Asked Questions
        </h4>
        
        <div class="row">
            <div class="col-lg-10 offset-lg-1">
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>What drone services do you offer in India?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>We offer aerial photography, agricultural surveys, infrastructure inspection, 3D mapping, drone training (from <span class="price-tag">₹1,999</span>), and custom drone solutions across India.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>Do I need DGCA approval for drone operations?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Yes, commercial drone operations require DGCA approval. We help with Digital Sky platform registration, UIN, and UAOP applications.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>What are your drone prices in Indian Rupees?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Our drones start from <span class="price-tag">₹49,999</span> for basic models, <span class="price-tag">₹1,99,999</span> for professional models, and <span class="price-tag">₹4,99,999+</span> for industrial drones.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>Do you provide repair services in India?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Yes, we have service centers in Delhi, Mumbai, Bangalore, and Chennai. Basic repairs start from <span class="price-tag">₹999</span>.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        <span>Can you customize drones for Indian conditions?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Yes, we customize drones for Indian weather, with dust protection, extended range (up to 10km), and local language support.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
            // Real-time validation functions
            function validateName(name) {
                const pattern = /^[a-zA-Z\s]{2,50}$/;
                return pattern.test(name) && name.trim().length > 0;
            }
            
            function validateEmail(email) {
                const pattern = /^[a-zA-Z0-9._%+-]+@@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
                return pattern.test(email) && email.length <= 254;
            }
            
            function validatePhone(phone) {
                if (!phone || phone.trim() === '') return true; // Optional field
                const cleanPhone = phone.replace(/[\s\-\(\)\+]/g, '');
                return /^[0-9]{10,12}$/.test(cleanPhone);
            }
            
            function validateCompany(company) {
                if (!company || company.trim() === '') return true; // Optional field
                return company.length >= 2 && company.length <= 100;
            }
            
            function validateSubject(subject) {
                const validSubjects = ['general', 'sales', 'support', 'service', 'training', 'partnership', 'other'];
                return subject && validSubjects.includes(subject);
            }
            
            function validateMessage(message) {
                return message && message.length >= 10 && message.length <= 2000;
            }
            
            // Show validation hints
            function showHint(element, isValid, validMessage, invalidMessage, infoMessage) {
                const hint = $(element).siblings('.validation-hint');
                if ($(element).val().trim().length === 0) {
                    hint.removeClass('valid invalid').addClass('show').html('<i class="fas fa-info-circle"></i> ' + infoMessage);
                } else if (isValid) {
                    hint.removeClass('invalid').addClass('valid show').html('<i class="fas fa-check-circle"></i> ' + validMessage);
                } else {
                    hint.removeClass('valid').addClass('invalid show').html('<i class="fas fa-exclamation-circle"></i> ' + invalidMessage);
                }
            }
            
            // Update field styling
            function updateFieldStyle(element, isValid, optional = false) {
                if (!optional && $(element).val().trim().length === 0) {
                    $(element).removeClass('is-valid is-invalid');
                } else if (optional && $(element).val().trim().length === 0) {
                    $(element).removeClass('is-valid is-invalid');
                } else if (isValid) {
                    $(element).removeClass('is-invalid').addClass('is-valid');
                } else {
                    $(element).removeClass('is-valid').addClass('is-invalid');
                }
            }
            
            // Name validation
            $('#name').on('input', function() {
                const value = $(this).val();
                const isValid = validateName(value);
                updateFieldStyle(this, isValid);
                showHint(this, isValid, 'Valid name', 'Name must be 2-50 characters, letters and spaces only', '2-50 characters, letters and spaces only');
            });
            
            // Email validation
            $('#email').on('input', function() {
                const value = $(this).val();
                const isValid = validateEmail(value);
                updateFieldStyle(this, isValid);
                showHint(this, isValid, 'Valid email address', 'Please enter a valid email address', 'Enter a valid email address');
            });
            
            // Phone validation
            $('#phone').on('input', function() {
                let value = $(this).val();
                const isValid = validatePhone(value);
                
                // Format phone number for display
                if (value.length > 0) {
                    let digits = value.replace(/\D/g, '');
                    if (digits.length > 0) {
                        if (digits.length <= 10) {
                            value = '+91 ' + digits;
                        } else {
                            value = '+' + digits;
                        }
                    }
                    $(this).val(value);
                }
                
                updateFieldStyle(this, isValid, true);
                showHint(this, isValid, 'Valid phone number', 'Please enter a valid phone number', 'Enter a valid phone number (optional)');
            });
            
            // Company validation
            $('#company').on('input', function() {
                const value = $(this).val();
                const isValid = validateCompany(value);
                updateFieldStyle(this, isValid, true);
                showHint(this, isValid, 'Valid company name', 'Company name must be 2-100 characters', 'Max 100 characters (optional)');
            });
            
            // Subject validation
            $('#subject').on('change', function() {
                const value = $(this).val();
                const isValid = validateSubject(value);
                updateFieldStyle(this, isValid);
                showHint(this, isValid, 'Subject selected', 'Please select a subject', 'Please select a subject');
            });
            
            // Message validation with character count
            $('#message').on('input', function() {
                const value = $(this).val();
                const length = value.length;
                const isValid = validateMessage(value);
                
                // Update character count
                const charCount = $('#charCount');
                charCount.text(length + '/2000');
                
                if (length < 10) {
                    charCount.removeClass('danger').addClass('warning');
                } else if (length > 2000) {
                    charCount.removeClass('warning').addClass('danger');
                } else {
                    charCount.removeClass('warning danger');
                }
                
                updateFieldStyle(this, isValid);
                showHint(this, isValid, 'Valid message', 'Message must be 10-2000 characters', '10-2000 characters');
            });
            
            // Check if form is valid
            function isFormValid() {
                const nameValid = validateName($('#name').val());
                const emailValid = validateEmail($('#email').val());
                const phoneValid = validatePhone($('#phone').val());
                const companyValid = validateCompany($('#company').val());
                const subjectValid = validateSubject($('#subject').val());
                const messageValid = validateMessage($('#message').val());
                
                return nameValid && emailValid && phoneValid && companyValid && subjectValid && messageValid;
            }
            
            // Update submit button state
            function updateSubmitButton() {
                const isValid = isFormValid();
                $('#submitBtn').prop('disabled', !isValid);
                
                if (isValid) {
                    $('#submitBtn').css('opacity', '1').css('cursor', 'pointer');
                } else {
                    $('#submitBtn').css('opacity', '0.5').css('cursor', 'not-allowed');
                }
            }
            
            // Update button on input changes
            $('#name, #email, #phone, #company, #subject, #message').on('input change', function() {
                updateSubmitButton();
            });
            
            // Initial validation
            $('#name').trigger('input');
            $('#email').trigger('input');
            $('#phone').trigger('input');
            $('#company').trigger('input');
            $('#subject').trigger('change');
            $('#message').trigger('input');
            
            // Form submission
            $('#contactForm').submit(function(e) {
                e.preventDefault();
                
                if (!isFormValid()) {
                    // Highlight all invalid fields
                    if (!validateName($('#name').val())) $('#name').addClass('is-invalid');
                    if (!validateEmail($('#email').val())) $('#email').addClass('is-invalid');
                    if (!validatePhone($('#phone').val()) && $('#phone').val().trim() !== '') $('#phone').addClass('is-invalid');
                    if (!validateCompany($('#company').val()) && $('#company').val().trim() !== '') $('#company').addClass('is-invalid');
                    if (!validateSubject($('#subject').val())) $('#subject').addClass('is-invalid');
                    if (!validateMessage($('#message').val())) $('#message').addClass('is-invalid');
                    
                    // Scroll to first error
                    $('html, body').animate({
                        scrollTop: $('.is-invalid:first').offset().top - 100
                    }, 500);
                    
                    return false;
                }
                
                // Show loading state
                const submitBtn = $('#submitBtn');
                submitBtn.html('<span class="loading-spinner"></span>Sending...').prop('disabled', true);
                
                // Submit form
                this.submit();
            });
            
            // Auto-open first FAQ after a delay
            setTimeout(() => {
                if ($('.faq-item').length > 0) {
                    $('.faq-item:first-child .faq-question').click();
                }
            }, 1000);
        });
        
        // FAQ toggle function with animation
        function toggleFAQ(element) {
            const $question = $(element);
            const $answer = $question.next('.faq-answer');
            const $icon = $question.find('i');
            
            // Toggle current FAQ
            if ($answer.is(':visible')) {
                $answer.slideUp(300);
                $icon.removeClass('fa-chevron-up').addClass('fa-chevron-down');
            } else {
                // Close all other FAQs
                $('.faq-answer').slideUp(300);
                $('.faq-question i').removeClass('fa-chevron-up').addClass('fa-chevron-down');
                
                // Open current FAQ
                $answer.slideDown(300);
                $icon.removeClass('fa-chevron-down').addClass('fa-chevron-up');
            }
            
            // Scroll to question if it's being opened
            if ($answer.is(':visible')) {
                $('html, body').animate({
                    scrollTop: $question.offset().top - 100
                }, 300);
            }
        }
    </script>
}