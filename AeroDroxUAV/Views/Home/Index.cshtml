@{
    ViewData["Title"] = "AeroDrox UAV - Precision Aerial Solutions";
    
    // Helper function to check if user is logged in
    bool IsLoggedIn()
    {
        return !string.IsNullOrEmpty(Context.Session.GetString("Username"));
    }
}

<style>
    /* Hero Section */
    .hero-section {
        background: linear-gradient(135deg, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0.6) 100%), 
                    url('https://images.unsplash.com/photo-1473968512647-3e447244af8f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80') 
                    no-repeat center center;
        background-size: cover;
        color: white;
        padding: 120px 0 80px;
        text-align: center;
        position: relative;
        overflow: hidden;
        width: 100vw;
        margin-left: calc(-50vw + 50%);
        margin-right: calc(-50vw + 50%);
    }
    
    .hero-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(circle at center, transparent 0%, rgba(0,0,0,0.7) 100%);
    }
    
    .hero-content {
        position: relative;
        z-index: 2;
    }
    
    /* Reset default margins and paddings */
    .full-width-section {
        width: 100vw;
        position: relative;
        left: 50%;
        right: 50%;
        margin-left: -50vw;
        margin-right: -50vw;
        padding: 80px 0;
        overflow: hidden;
    }
    
    .full-width-container {
        max-width: 100%;
        padding: 0 15px;
    }
    
    .section-title {
        position: relative;
        padding-bottom: 20px;
        margin-bottom: 40px;
        text-align: center;
    }
    
    .section-title::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 60px;
        height: 4px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 2px;
    }
    
    /* Cards */
    .service-card, .product-card {
        transition: all 0.3s ease;
        border: none;
        border-radius: 15px;
        overflow: hidden;
        height: 100%;
    }
    
    .service-card:hover, .product-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    }
    
    .service-card .card-body {
        padding: 2rem;
    }
    
    .product-card .card-img-top {
        height: 200px;
        object-fit: cover;
    }
    
    /* Stats */
    .stats-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 60px 0;
        width: 100%;
    }
    
    .stat-item {
        text-align: center;
    }
    
    .stat-number {
        font-size: 3rem;
        font-weight: 700;
        margin-bottom: 10px;
    }
    
    .stat-label {
        font-size: 1.1rem;
        opacity: 0.9;
    }
    
    /* Contact Form */
    .contact-form-container {
        background: white;
        border-radius: 15px;
        padding: 3rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }
    
    /* Features */
    .feature-icon {
        width: 70px;
        height: 70px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 20px;
    }
    
    .feature-icon i {
        font-size: 1.8rem;
        color: white;
    }

    .btn-gradient-success {
        background: linear-gradient(135deg, #20c997 0%, #17a2b8 100%);
        border: none;
        color: white;
        padding: 12px 30px;
        border-radius: 10px;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .btn-gradient-success:hover {
        background: linear-gradient(135deg, #17a2b8 0%, #20c997 100%);
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(32, 201, 151, 0.4);
        color: white;
    }
    
    /* Gradient Buttons */
    .btn-gradient-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        color: white;
        padding: 12px 30px;
        border-radius: 10px;
        font-weight: 600;
        transition: all 0.3s ease;
    }
    
    .btn-gradient-primary:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        color: white;
    }
    
    .btn-gradient-outline {
        background: transparent;
        border: 2px solid #667eea;
        color: #667eea;
        padding: 12px 30px;
        border-radius: 10px;
        font-weight: 600;
        transition: all 0.3s ease;
    }
    
    .btn-gradient-outline:hover {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-color: transparent;
        transform: translateY(-3px);
    }
    
    /* 4 cards per row */
    .row-cols-4 {
        row-gap: 30px;
    }
    
    /* ===== DRONE SUVICHA CAROUSEL - THREE CARDS PER ROW ===== */
    .services-carousel-container {
        position: relative;
        padding: 40px 0;
        overflow: hidden;
        max-width: 1200px;
        margin: 0 auto;
    }

    .services-carousel {
        display: flex;
        transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        gap: 30px;
    }

    .carousel-slide {
        flex: 0 0 calc(33.333% - 20px); /* Three cards per row with gap */
        padding: 10px;
        transition: all 0.5s ease;
        opacity: 0.7;
        transform: scale(0.95);
    }

    /* Highlighting the active center card */
    .carousel-slide.center {
        opacity: 1;
        transform: scale(1);
        z-index: 2;
    }

    .carousel-slide.center .card {
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        border: 3px solid #667eea;
    }

    /* Pause indicator for users */
    .services-carousel-container:hover {
        cursor: grab;
    }
    
    /* Navigation buttons */
    .carousel-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 100%;
        display: flex;
        justify-content: space-between;
        padding: 0 20px;
        z-index: 10;
    }
    
    .carousel-nav button {
        background: rgba(102, 126, 234, 0.9);
        border: none;
        color: white;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        font-size: 1.5rem;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .carousel-nav button:hover {
        background: #667eea;
        transform: scale(1.1);
    }
    
    /* Dots indicator */
    .carousel-dots {
        display: flex;
        justify-content: center;
        margin-top: 30px;
        gap: 10px;
    }
    
    .carousel-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #ddd;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .carousel-dot.active {
        background: #667eea;
        transform: scale(1.3);
    }

    /* Background image sections - FULL WIDTH */
    .drone-suvidha-section {
        background: linear-gradient(135deg, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0.5) 100%), 
                    url('/background/HomeFarmBG.jpg') no-repeat center center;
        background-size: cover;
        background-attachment: fixed;
        color: white;
        position: relative;
        margin: 0;
        padding: 0;
    }

    .customized-drones-section {
        background: linear-gradient(135deg, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0.5) 100%), 
                    url('/background/HomeCustomeBG.png') no-repeat center center;
        background-size: cover;
        background-attachment: fixed;
        color: white;
        position: relative;
        margin: 0;
        padding: 0;
    }

    .drone-bazaar-section {
        background: linear-gradient(135deg, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0.5) 100%), 
                    url('/background/HomeAccessBG.jpg') no-repeat center center;
        background-size: cover;
        background-attachment: fixed;
        color: white;
        position: relative;
        margin: 0;
        padding: 0;
    }

    .new-arrivals-section {
        background: linear-gradient(135deg, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0.5) 100%), 
                    url('/background/HomeNewBG.jpg') no-repeat center center;
        background-size: cover;
        background-attachment: fixed;
        color: white;
        position: relative;
        margin: 0;
        padding: 0;
    }

    .section-content-wrapper {
        padding: 80px 0;
        background: rgba(0, 0, 0, 0.5);
        min-height: 100vh;
        display: flex;
        align-items: center;
    }

    .section-content {
        position: relative;
        z-index: 2;
        width: 100%;
    }

    /* Remove all margins from containers and rows */
    .container-fluid {
        padding-right: 0 !important;
        padding-left: 0 !important;
        margin-right: 0 !important;
        margin-left: 0 !important;
        max-width: 100% !important;
    }

    .container {
        max-width: 100% !important;
        padding-right: 15px !important;
        padding-left: 15px !important;
        margin-right: 0 !important;
        margin-left: 0 !important;
    }

    /* Adjust text colors for better visibility on backgrounds */
    .drone-suvidha-section .text-muted,
    .customized-drones-section .text-muted,
    .drone-bazaar-section .text-muted,
    .new-arrivals-section .text-muted {
        color: rgba(255, 255, 255, 0.8) !important;
    }

    .drone-suvidha-section .card,
    .customized-drones-section .card,
    .drone-bazaar-section .card,
    .new-arrivals-section .card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
    }

    .drone-suvidha-section .section-title,
    .customized-drones-section .section-title,
    .drone-bazaar-section .section-title,
    .new-arrivals-section .section-title {
        color: white;
    }

    .drone-suvidha-section .section-title::after,
    .customized-drones-section .section-title::after,
    .drone-bazaar-section .section-title::after,
    .new-arrivals-section .section-title::after {
        background: linear-gradient(135deg, #20c997 0%, #17a2b8 100%);
    }

    /* Remove body margins */
    body {
        margin: 0;
        padding: 0;
        overflow-x: hidden;
    }
    
    /* Homepage Indicator Badge */
    .homepage-badge {
        position: absolute;
        top: 10px;
        left: 10px;
        background: linear-gradient(135deg, #20c997 0%, #17a2b8 100%);
        color: white;
        padding: 5px 10px;
        border-radius: 4px;
        font-size: 0.75rem;
        font-weight: 600;
        z-index: 1;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    
    /* Featured Badge */
    .featured-badge {
        position: absolute;
        top: 10px;
        left: 10px;
        background: linear-gradient(135deg, #fbb034 0%, #ffdd00 100%);
        color: #000;
        padding: 5px 10px;
        border-radius: 4px;
        font-size: 0.75rem;
        font-weight: 600;
        z-index: 1;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    
    /* Validation Styles */
    .form-control-lg.is-valid {
        border-color: #28a745;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath fill='%2328a745' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right calc(0.375em + 0.1875rem) center;
        background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
        padding-right: calc(1.5em + 0.75rem);
    }
    
    .form-control-lg.is-invalid {
        border-color: #dc3545;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right calc(0.375em + 0.1875rem) center;
        background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
        padding-right: calc(1.5em + 0.75rem);
    }
    
    .form-select-lg.is-valid {
        border-color: #28a745;
    }
    
    .form-select-lg.is-invalid {
        border-color: #dc3545;
    }
    
    .validation-hint {
        font-size: 0.85rem;
        margin-top: 4px;
        color: #6c757d;
    }
    
    .validation-hint.valid {
        color: #28a745 !important;
    }
    
    .validation-hint.invalid {
        color: #dc3545 !important;
    }
    
    .character-count {
        font-size: 0.85rem;
        margin-top: 4px;
        color: #6c757d;
    }
    
    .character-count.warning {
        color: #ffc107 !important;
    }
    
    .character-count.danger {
        color: #dc3545 !important;
    }
    
    /* Responsive adjustments */
    @@media (max-width: 1200px) {
        .services-carousel-container {
            max-width: 900px;
        }
        
        .carousel-slide {
            flex: 0 0 calc(33.333% - 20px);
        }
    }
    
    @@media (max-width: 992px) {
        .services-carousel-container {
            max-width: 600px;
        }
        
        .carousel-slide {
            flex: 0 0 calc(50% - 20px); /* Two cards per row on tablets */
        }
        
        .section-content-wrapper {
            padding: 60px 0;
        }
        
        .hero-section {
            padding: 80px 0 40px;
        }
    }
    
    @@media (max-width: 768px) {
        .services-carousel-container {
            max-width: 450px;
        }
        
        .carousel-slide {
            flex: 0 0 calc(100% - 20px); /* One card per row on mobile */
        }
        
        .section-content-wrapper {
            padding: 60px 0;
        }
        
        .hero-section {
            padding: 80px 0 40px;
        }
    }
    
    @@media (max-width: 576px) {
        .services-carousel-container {
            max-width: 350px;
            padding: 30px 0;
        }
        
        .carousel-nav button {
            width: 40px;
            height: 40px;
            font-size: 1.2rem;
        }
        
        .section-content-wrapper {
            padding: 40px 0;
        }
        
        .hero-section {
            padding: 60px 0 30px;
        }
    }
</style>

<!-- Hero Section -->
<header class="hero-section" id="home">
    <div class="container">
        <div class="hero-content">
            <h1 class="display-3 fw-bold mb-4 animate__animated animate__fadeInDown">
                AeroDrox UAV
            </h1>
            <p class="lead mb-4 fs-4 animate__animated animate__fadeInUp animate__delay-1s">
                Leading the Future of Precision Aerial Solutions
            </p>
            <p class="mb-5 fs-5 animate__animated animate__fadeInUp animate__delay-2s">
                Professional drones and services for industrial, commercial, and recreational applications.
            </p>
            <div class="mt-4 animate__animated animate__fadeInUp animate__delay-3s">
                <a href="#customized-drones" class="btn btn-gradient-primary btn-lg me-3">
                    <i class="fas fa-drone me-2"></i>Explore Drones
                </a>
                <a href="#contact" class="btn btn-gradient-outline btn-lg">
                    <i class="fas fa-calendar-check me-2"></i>Get a Quote
                </a>
            </div>
        </div>
    </div>
</header>

<!-- About Section -->
<section id="about" class="section-padding bg-light">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-5 mb-lg-0">
                <h2 class="display-5 fw-bold mb-4">About <span class="text-primary">AeroDrox UAV</span></h2>
                <p class="lead mb-4">
                    Founded with a vision to revolutionize aerial technology, AeroDrox UAV delivers cutting-edge, 
                    reliable, and sustainable UAV solutions for industrial and recreational use.
                </p>
                <p class="mb-4">
                    Our technology is engineered for durability and precision, empowering professionals across 
                    agriculture, construction, media, and security sectors. We believe in the power of aerial 
                    data to drive efficiency, safety, and innovation.
                </p>
                <div class="row mt-5">
                    <div class="col-md-6 mb-3">
                        <div class="feature-icon">
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <h5 class="fw-bold mb-2">Precision Focused</h5>
                        <p class="text-muted">Accuracy in every flight and data collection</p>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h5 class="fw-bold mb-2">Safety First</h5>
                        <p class="text-muted">FAA compliant operations and protocols</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="position-relative">
                    <img src="https://images.unsplash.com/photo-1506947411487-a56738267384?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                         class="img-fluid rounded-3 shadow-lg" 
                         alt="AeroDrox UAV Team">
                    <div class="position-absolute bottom-0 start-0 bg-primary text-white p-4 rounded-end rounded-top" 
                         style="max-width: 300px;">
                        <h5 class="fw-bold mb-0">Innovating Since 2018</h5>
                        <p class="mb-0 small">5+ years of aerial excellence</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Stats Section -->
<section class="stats-section">
    <div class="container">
        <div class="row text-center">
            <div class="col-md-3 col-6 mb-4">
                <div class="stat-item">
                    <div class="stat-number">500+</div>
                    <div class="stat-label">Projects Completed</div>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-4">
                <div class="stat-item">
                    <div class="stat-number">50+</div>
                    <div class="stat-label">Expert Pilots</div>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-4">
                <div class="stat-item">
                    <div class="stat-number">24/7</div>
                    <div class="stat-label">Support Available</div>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-4">
                <div class="stat-item">
                    <div class="stat-number">98%</div>
                    <div class="stat-label">Client Satisfaction</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ===== DRONE SUVICHA CAROUSEL ===== -->
@if (ViewBag.FeaturedServices != null && ((IEnumerable<AeroDroxUAV.Models.DroneServices>)ViewBag.FeaturedServices).Any())
{
    <section class="drone-suvidha-section" id="drone-suvidha">
        <div class="section-content-wrapper">
            <div class="container section-content">
                <div class="text-center mb-5">
                    <h2 class="section-title display-5 fw-bold">
                        <i class="fas fa-concierge-bell text-primary me-2"></i>Our Drone Suvidha
                    </h2>
                    <p class="lead mb-4">Professional drone solutions for various industries</p>
                    <a href="/DroneServices/Index" class="btn btn-outline-light">
                        <i class="fas fa-eye me-2"></i>View All Services
                    </a>
                </div>

                <div class="services-carousel-container" id="carouselWrapper">
                    <div class="carousel-nav">
                        <button class="carousel-prev" id="carouselPrev">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="carousel-next" id="carouselNext">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    
                    <div class="services-carousel" id="servicesCarousel">
                        @{
                            var services = (IEnumerable<AeroDroxUAV.Models.DroneServices>)ViewBag.FeaturedServices;
                            var serviceIndex = 0;
                        }
                        @foreach (var service in services)
                        {
                            <div class="carousel-slide @(serviceIndex < 3 ? "center" : "")" data-index="@serviceIndex">
                                <div class="card h-100 border-0 shadow-lg">
                                    <!-- Service Media (Image or Video) -->
                                    <div class="position-relative" style="height: 250px; overflow: hidden;">
                                        @if (!string.IsNullOrEmpty(service.VideoUrl))
                                        {
                                            <video class="w-100 h-100" 
                                                   style="object-fit: cover; background-color: #000;"
                                                   autoplay 
                                                   muted 
                                                   loop 
                                                   playsinline
                                                   onmouseover="this.play()" 
                                                   onmouseout="this.play()">
                                                <source src="@service.VideoUrl" type="video/mp4">
                                                Your browser does not support the video tag.
                                            </video>
                                            <!-- Video Badge -->
                                            <div class="position-absolute top-0 start-0 m-2">
                                                <span class="badge bg-dark small">
                                                    <i class="fas fa-video me-1"></i>Video
                                                </span>
                                            </div>
                                        }
                                        else if (!string.IsNullOrEmpty(service.ImageUrl))
                                        {
                                            <img src="@service.ImageUrl" class="card-img-top" alt="@service.Name" 
                                                 style="height: 100%; width: 100%; object-fit: cover;">
                                            <!-- Image Badge -->
                                            <div class="position-absolute top-0 start-0 m-2">
                                                <span class="badge bg-info small">
                                                    <i class="fas fa-image me-1"></i>Image
                                                </span>
                                            </div>
                                        }
                                        else
                                        {
                                            <div class="card-img-top bg-secondary d-flex align-items-center justify-content-center" 
                                                 style="height: 100%;">
                                                <i class="fas fa-concierge-bell fa-3x text-white"></i>
                                            </div>
                                        }
                                        
                                        <!-- Status Badge -->
                                        <div class="position-absolute top-0 end-0 m-2">
                                            @if(service.IsActive)
                                            {
                                                <span class="badge bg-success small">
                                                    <i class="fas fa-check-circle me-1"></i>Active
                                                </span>
                                            }
                                            else
                                            {
                                                <span class="badge bg-secondary small">
                                                    <i class="fas fa-times-circle me-1"></i>Inactive
                                                </span>
                                            }
                                        </div>
                                    </div>
                                    
                                    <div class="card-body text-center">
                                        <div class="mb-3">
                                            <h5 class="card-title fw-bold mb-2">@service.Name</h5>
                                            <span class="badge bg-primary">@service.Category</span>
                                        </div>
                                        
                                        <!-- Duration Badge -->
                                        @if(!string.IsNullOrEmpty(service.Duration))
                                        {
                                            <div class="mb-3">
                                                <span class="badge bg-warning text-dark">
                                                    <i class="fas fa-clock me-1"></i>@service.Duration
                                                </span>
                                            </div>
                                        }
                                        
                                        <p class="card-text mb-4" style="height: 80px; overflow: hidden;">
                                            @if (!string.IsNullOrEmpty(service.Description))
                                            {
                                                if (service.Description.Length > 120)
                                                {
                                                    @service.Description.Substring(0, 120)@:...
                                                }
                                                else
                                                {
                                                    @service.Description
                                                }
                                            }
                                        </p>
                                        <div class="d-flex justify-content-center gap-3">
                                            <a href="/Contact/Index" class="btn btn-warning btn-sm">
                                                <i class="fas fa-calendar-check me-1"></i>Book Now
                                            </a>
                                            <a href="/DroneServices/Details/@service.Id" class="btn btn-sm btn-outline-primary">
                                                <i class="fas fa-eye me-1"></i>View Details
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            serviceIndex++;
                        }
                    </div>
                    
                    <div class="carousel-dots" id="carouselDots">
                        @if (services != null)
                        {
                            var totalGroups = (int)Math.Ceiling(services.Count() / 3.0);
                            for (int i = 0; i < totalGroups; i++)
                            {
                                <div class="carousel-dot @(i == 0 ? "active" : "")" data-slide="@i"></div>
                            }
                        }
                    </div>
                </div>
            </div>
        </div>
    </section>
}

<!-- Customized Drones Section (Featured Drones) -->
<section id="customized-drones" class="customized-drones-section">
    <div class="section-content-wrapper">
        <div class="container section-content">
            <h2 class="section-title display-5 fw-bold">Customized Drones</h2>
            <p class="text-center mb-5 fs-5">
                Premium drones handpicked by our experts
            </p>
            
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
                @if (ViewBag.FeaturedDrones != null && ((IEnumerable<AeroDroxUAV.Models.Drone>)ViewBag.FeaturedDrones).Any())
                {
                    @foreach(var drone in ViewBag.FeaturedDrones)
                    {
                        @if (drone != null)
                        {
                            <div class="col">
                                <div class="card product-card shadow-lg h-100">
                                    <!-- Image -->
                                    <div class="position-relative">
                                        @if (!string.IsNullOrEmpty(drone.ImageUrl))
                                        {
                                            <img src="@drone.ImageUrl" class="card-img-top" 
                                                 alt="@drone.Name" style="height: 220px; object-fit: cover;">
                                        }
                                        else
                                        {
                                            <img src="https://images.unsplash.com/photo-1473968512647-3e447244af8f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                                                 class="card-img-top" 
                                                 alt="@drone.Name" style="height: 220px; object-fit: cover;">
                                        }
                                        
                                        <!-- Featured Badge -->
                                        <div class="featured-badge">
                                            <i class="fas fa-star me-1"></i>Customized
                                        </div>
                                        
                                        <!-- Price Badge -->
                                        <div class="position-absolute top-0 end-0 p-3">
                                            @if (drone.DiscountPrice != null && drone.DiscountPrice > 0)
                                            {
                                                <span class="badge bg-danger fs-6">
                                                    <del class="text-light opacity-75">₹@drone.Price.ToString("N2")</del> 
                                                    ₹@((drone.DiscountPrice ?? 0).ToString("N2"))
                                                </span>
                                            }
                                            else
                                            {
                                                <span class="badge bg-success fs-6">
                                                    ₹@drone.Price.ToString("N2")
                                                </span>
                                            }
                                        </div>
                                    </div>
                                    
                                    <!-- Card Body -->
                                    <div class="card-body d-flex flex-column">
                                        <h5 class="card-title fw-bold">@drone.Name</h5>
                                        <div class="mb-3">
                                            @if(!string.IsNullOrEmpty(drone.Category))
                                            {
                                                <span class="badge bg-info me-2">@drone.Category</span>
                                            }
                                            @if(!string.IsNullOrEmpty(drone.Condition))
                                            {
                                                <span class="badge @(drone.Condition == "New" ? "bg-success" : "bg-warning")">@drone.Condition</span>
                                            }
                                        </div>
                                        <p class="card-text mb-4 flex-grow-1">
                                            @if(!string.IsNullOrEmpty(drone.Description) && drone.Description.Length > 80)
                                            {
                                                @drone.Description.Substring(0, 80)@:...
                                            }
                                            else if (!string.IsNullOrEmpty(drone.Description))
                                            {
                                                @drone.Description
                                            }
                                        </p>
                                        <div class="mt-auto">
                                            <div class="d-grid gap-2">
                                                @if(IsLoggedIn())
                                                {
                                                    <a href="/Drone/Details/@drone.Id" class="btn btn-primary">
                                                        <i class="fas fa-info-circle me-2"></i>View Details
                                                    </a>
                                                }
                                                else
                                                {
                                                    <a href="/Drone/Index" class="btn btn-primary">
                                                        <i class="fas fa-store me-2"></i>View All Drones
                                                    </a>
                                                }
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                }
                else
                {
                    <div class="col-12">
                        <div class="text-center py-5">
                            <i class="fas fa-drone fa-4x mb-3" style="color: rgba(255,255,255,0.7);"></i>
                            <h4 class="text-white">No customized drones available</h4>
                            <p class="mb-3">Currently "Customized Build Drone Are Not Available," Reach after sometime.</p>
                        </div>
                    </div>
                }
            </div>
            
            <div class="text-center mt-5">
                <a href="/Drone/Index" class="btn btn-gradient-primary btn-lg">
                    <i class="fas fa-store me-2"></i>Visit Full Store
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Drone Bazaar Section (Only accessories with ShowOnHomepage = true) -->
<section id="drone-bazaar" class="drone-bazaar-section">
    <div class="section-content-wrapper">
        <div class="container section-content">
            <h2 class="section-title display-5 fw-bold">Drone Bazaar</h2>
            <p class="text-center mb-5 fs-5">
                Essential accessories for enhanced drone performance
            </p>
            
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
                @if (ViewBag.DroneBazaarAccessories != null && ((IEnumerable<AeroDroxUAV.Models.Accessories>)ViewBag.DroneBazaarAccessories).Any())
                {
                    @foreach(var accessory in ViewBag.DroneBazaarAccessories)
                    {
                        @if (accessory != null)
                        {
                            <div class="col">
                                <div class="card product-card shadow-lg h-100">
                                    <!-- Image -->
                                    <div class="position-relative">
                                        @if (!string.IsNullOrEmpty(accessory.ImageUrl))
                                        {
                                            <img src="@accessory.ImageUrl" class="card-img-top" 
                                                 alt="@accessory.Name" style="height: 220px; object-fit: cover;">
                                        }
                                        else
                                        {
                                            <img src="https://images.unsplash.com/photo-1581094794329-c8112a89af12?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                                                 class="card-img-top" 
                                                 alt="@accessory.Name" style="height: 220px; object-fit: cover;">
                                        }
                                        
                                        <!-- Homepage Badge -->
                                        <div class="homepage-badge">
                                            <i class="fas fa-home me-1"></i>On Homepage
                                        </div>
                                        
                                        <!-- Price Badge -->
                                        <div class="position-absolute top-0 end-0 p-3">
                                            @if (accessory.DiscountPrice != null && accessory.DiscountPrice > 0)
                                            {
                                                <span class="badge bg-danger fs-6">
                                                    <del class="text-light opacity-75">₹@accessory.Price.ToString("N2")</del> 
                                                    ₹@((accessory.DiscountPrice ?? 0).ToString("N2"))
                                                </span>
                                            }
                                            else
                                            {
                                                <span class="badge bg-primary fs-6">
                                                    ₹@accessory.Price.ToString("N2")
                                                </span>
                                            }
                                        </div>
                                    </div>
                                    
                                    <!-- Card Body -->
                                    <div class="card-body d-flex flex-column">
                                        <h5 class="card-title fw-bold">@accessory.Name</h5>
                                        <div class="mb-3">
                                            @if(!string.IsNullOrEmpty(accessory.Condition))
                                            {
                                                <span class="badge @(accessory.Condition == "New" ? "bg-success" : "bg-warning")">@accessory.Condition</span>
                                            }
                                        </div>
                                        <p class="card-text mb-4 flex-grow-1">
                                            @if(!string.IsNullOrEmpty(accessory.Description) && accessory.Description.Length > 80)
                                            {
                                                @accessory.Description.Substring(0, 80)@:...
                                            }
                                            else if (!string.IsNullOrEmpty(accessory.Description))
                                            {
                                                @accessory.Description
                                            }
                                        </p>
                                        <div class="mt-auto">
                                            <div class="d-grid gap-2">
                                                @if(IsLoggedIn())
                                                {
                                                    <a href="/Accessories/Details/@accessory.Id" class="btn btn-success">
                                                        <i class="fas fa-info-circle me-2"></i>View Details
                                                    </a>
                                                }
                                                else
                                                {
                                                    <a href="/Accessories/Index" class="btn btn-success">
                                                        <i class="fas fa-tools me-2"></i>View All Accessories
                                                    </a>
                                                }
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                }
                else
                {
                    <div class="col-12">
                        <div class="text-center py-5">
                            <i class="fas fa-drone fa-4x mb-3" style="color: rgba(255,255,255,0.7);"></i>
                            <h4 class="text-white">No drones accessories available</h4>
                            <p class="mb-3">Currently "Drone Accessories are Not Available," Reach after sometime. </p>
                        </div>
                    </div>
                }
            </div>
            
            <div class="text-center mt-5">
                <a href="/Accessories/Index" class="btn btn-gradient-success btn-lg">
                    <i class="fas fa-tools me-2"></i>View All Accessories
                </a>
            </div>
        </div>
    </div>
</section>

<!-- New Arrivals Section (Only drones with ShowOnHomepage = true) -->
<section id="new-arrivals" class="new-arrivals-section">
    <div class="section-content-wrapper">
        <div class="container section-content">
            <h2 class="section-title display-5 fw-bold">New Arrivals</h2>
            <p class="text-center mb-5 fs-5">
                Latest drones added to our collection
            </p>
            
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
                @if (ViewBag.NewDrones != null && ((IEnumerable<AeroDroxUAV.Models.Drone>)ViewBag.NewDrones).Any())
                {
                    @foreach(var drone in ViewBag.NewDrones)
                    {
                        @if (drone != null)
                        {
                            <div class="col">
                                <div class="card product-card shadow-lg h-100">
                                    <!-- Image -->
                                    <div class="position-relative">
                                        @if (!string.IsNullOrEmpty(drone.ImageUrl))
                                        {
                                            <img src="@drone.ImageUrl" class="card-img-top" 
                                                 alt="@drone.Name" style="height: 220px; object-fit: cover;">
                                        }
                                        else
                                        {
                                            <img src="https://images.unsplash.com/photo-1473968512647-3e447244af8f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                                                 class="card-img-top" 
                                                 alt="@drone.Name" style="height: 220px; object-fit: cover;">
                                        }
                                        
                                        <!-- Homepage Badge -->
                                        <div class="homepage-badge">
                                            <i class="fas fa-home me-1"></i>On Homepage
                                        </div>
                                        
                                        <!-- Category Badge -->
                                        @if(!string.IsNullOrEmpty(drone.Category))
                                        {
                                            <div class="position-absolute top-0 end-0 p-3">
                                                <span class="badge bg-info">@drone.Category</span>
                                            </div>
                                        }
                                    </div>
                                    
                                    <!-- Card Body -->
                                    <div class="card-body d-flex flex-column">
                                        <h5 class="card-title fw-bold">@drone.Name</h5>
                                        <div class="mb-3">
                                            @if(!string.IsNullOrEmpty(drone.Category))
                                            {
                                                <span class="badge bg-secondary me-2">@drone.Category</span>
                                            }
                                            @if (drone.DiscountPrice != null && drone.DiscountPrice > 0)
                                            {
                                                <span class="text-success fw-bold fs-5">
                                                    <del class="text-muted small">₹@drone.Price.ToString("N2")</del> 
                                                     ₹@((drone.DiscountPrice ?? 0).ToString("N2"))
                                                </span>
                                            }
                                            else
                                            {
                                                <span class="text-success fw-bold fs-5">₹@drone.Price.ToString("N2")</span>
                                            }
                                        </div>
                                        <p class="card-text mb-4 flex-grow-1">
                                            @if(!string.IsNullOrEmpty(drone.Description) && drone.Description.Length > 80)
                                            {
                                                @drone.Description.Substring(0, 80)@:...
                                            }
                                            else if (!string.IsNullOrEmpty(drone.Description))
                                            {
                                                @drone.Description
                                            }
                                        </p>
                                        <div class="mt-auto">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <small>
                                                    <i class="fas fa-calendar-alt me-1"></i>
                                                    @drone.CreatedAt.ToString("MMM dd")
                                                </small>
                                                @if(IsLoggedIn())
                                                {
                                                    <a href="/Drone/Details/@drone.Id" class="btn btn-sm btn-outline-primary">
                                                        <i class="fas fa-eye me-1"></i>View
                                                    </a>
                                                }
                                                else
                                                {
                                                    <a href="/Drone/Index" class="btn btn-sm btn-outline-primary">
                                                        <i class="fas fa-store me-1"></i>Browse
                                                    </a>
                                                }
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                }
                else
                {
                    {
                    <div class="col-12">
                        <div class="text-center py-5">
                            <i class="fas fa-drone fa-4x mb-3" style="color: rgba(255,255,255,0.7);"></i>
                            <h4 class="text-white">No drones available</h4>
                            <p class="mb-3">Currently "Drone are Not Available," Reach after sometime. </p>
                        </div>
                    </div>
                    }
                }
            </div>
            
            <div class="text-center mt-5">
                <a href="/Drone/Index" class="btn btn-gradient-primary btn-lg">
                    <i class="fas fa-store me-2"></i>View All Drones
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Contact Section -->
<section id="contact" class="section-padding">
    <div class="container">
        <div class="row">
            <div class="col-lg-10 offset-lg-1">
                <div class="contact-form-container">
                    <h2 class="section-title display-5 fw-bold">Get In Touch</h2>
                    <p class="text-center text-muted mb-5 fs-5">
                        Ready to elevate your projects with aerial solutions? Contact us today.
                    </p>
                    
                    <div class="row">
                        <div class="col-lg-6 mb-4 mb-lg-0">
                            <div class="p-4 bg-light rounded-3 h-100">
                                <h4 class="fw-bold mb-4">Contact Information</h4>
                                
                                <div class="mb-4">
                                    <div class="d-flex align-items-start mb-3">
                                        <div class="me-3">
                                            <div class="bg-primary text-white rounded-circle p-2">
                                                <i class="fas fa-map-marker-alt"></i>
                                            </div>
                                        </div>
                                        <div>
                                            <h6 class="fw-bold mb-1">Our Location</h6>
                                            <p class="text-muted mb-0">123 Tech Street, Innovation City, IC 10101</p>
                                        </div>
                                    </div>
                                    
                                    <div class="d-flex align-items-start mb-3">
                                        <div class="me-3">
                                            <div class="bg-success text-white rounded-circle p-2">
                                                <i class="fas fa-phone"></i>
                                            </div>
                                        </div>
                                        <div>
                                            <h6 class="fw-bold mb-1">Phone Number</h6>
                                            <p class="text-muted mb-0">+1 (555) 123-4567</p>
                                        </div>
                                    </div>
                                    
                                    <div class="d-flex align-items-start mb-3">
                                        <div class="me-3">
                                            <div class="bg-info text-white rounded-circle p-2">
                                                <i class="fas fa-envelope"></i>
                                            </div>
                                        </div>
                                        <div>
                                            <h6 class="fw-bold mb-1">Email Address</h6>
                                            <p class="text-muted mb-0">info@aerodrox.com</p>
                                        </div>
                                    </div>
                                    
                                    <div class="d-flex align-items-start">
                                        <div class="me-3">
                                            <div class="bg-warning text-white rounded-circle p-2">
                                                <i class="fas fa-clock"></i>
                                            </div>
                                        </div>
                                        <div>
                                            <h6 class="fw-bold mb-1">Business Hours</h6>
                                            <p class="text-muted mb-0">Mon-Fri: 9:00 AM - 6:00 PM</p>
                                            <p class="text-muted mb-0">Sat: 10:00 AM - 4:00 PM</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-4">
                                    <h6 class="fw-bold mb-3">Follow Us</h6>
                                    <div class="d-flex gap-3">
                                        <a href="#" class="text-primary">
                                            <i class="fab fa-facebook fa-lg"></i>
                                        </a>
                                        <a href="#" class="text-info">
                                            <i class="fab fa-twitter fa-lg"></i>
                                        </a>
                                        <a href="#" class="text-danger">
                                            <i class="fab fa-instagram fa-lg"></i>
                                        </a>
                                        <a href="#" class="text-primary">
                                            <i class="fab fa-linkedin fa-lg"></i>
                                        </a>
                                        <a href="#" class="text-success">
                                            <i class="fab fa-whatsapp fa-lg"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-6">
                            @if(ViewBag.SuccessMessage != null)
                            {
                                <div class="alert alert-success alert-dismissible fade show mb-4">
                                    <strong>Success!</strong> @ViewBag.SuccessMessage
                                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                                </div>
                            }
                            
                            @if(ViewBag.ErrorMessage != null)
                            {
                                <div class="alert alert-danger alert-dismissible fade show mb-4">
                                    <strong>Error!</strong> @ViewBag.ErrorMessage
                                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                                </div>
                            }
                            
                            <form method="post" asp-controller="Contact" asp-action="Submit" id="contactForm" novalidate>
                                <div class="mb-3">
                                    <label for="name" class="form-label fw-semibold">
                                        <i class="fas fa-user me-2"></i>Your Name <span class="text-danger">*</span>
                                    </label>
                                    <input type="text" name="name" id="name" class="form-control form-control-lg" 
                                           placeholder="John Doe" 
                                           maxlength="50"
                                           pattern="[a-zA-Z\s]{2,50}"
                                           title="Name must be 2-50 characters and contain only letters and spaces"
                                           value="@(ViewBag.FormData?.Name ?? "")"
                                           required>
                                    <div class="validation-hint" id="nameHint">
                                        <i class="fas fa-info-circle"></i> 2-50 characters, letters and spaces only
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="email" class="form-label fw-semibold">
                                        <i class="fas fa-envelope me-2"></i>Email Address <span class="text-danger">*</span>
                                    </label>
                                    <input type="email" name="email" id="email" class="form-control form-control-lg" 
                                           placeholder="john@example.com" 
                                           maxlength="254"
                                           value="@(ViewBag.FormData?.Email ?? "")"
                                           required>
                                    <div class="validation-hint" id="emailHint">
                                        <i class="fas fa-info-circle"></i> Enter a valid email address
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="phone" class="form-label fw-semibold">
                                        <i class="fas fa-phone me-2"></i>Phone Number
                                    </label>
                                    <input type="tel" name="phone" id="phone" class="form-control form-control-lg" 
                                           placeholder="+1 (555) 123-4567"
                                           maxlength="15"
                                           value="@(ViewBag.FormData?.Phone ?? "")">
                                    <div class="validation-hint" id="phoneHint">
                                        <i class="fas fa-info-circle"></i> Enter a valid phone number (optional)
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="service" class="form-label fw-semibold">
                                        <i class="fas fa-concierge-bell me-2"></i>Service Interested In
                                    </label>
                                    <select name="service" id="service" class="form-select form-select-lg">
                                        @{
                                            var selectedService = ViewBag.FormData?.Service as string;
                                        }
                                        <option value="" selected="@(string.IsNullOrEmpty(selectedService))">Select a Service</option>
                                        <option value="inspection" selected="@(selectedService == "inspection")">Infrastructure Inspection</option>
                                        <option value="photography" selected="@(selectedService == "photography")">Aerial Photography</option>
                                        <option value="mapping" selected="@(selectedService == "mapping")">3D Mapping</option>
                                        <option value="training" selected="@(selectedService == "training")">Drone Training</option>
                                        <option value="other" selected="@(selectedService == "other")">Other Services</option>
                                    </select>
                                    <div class="validation-hint" id="serviceHint">
                                        <i class="fas fa-info-circle"></i> Select a service (optional)
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="message" class="form-label fw-semibold">
                                        <i class="fas fa-comment me-2"></i>Your Message <span class="text-danger">*</span>
                                    </label>
                                    <textarea name="message" id="message" rows="5" 
                                              class="form-control form-control-lg" 
                                              placeholder="Tell us about your project requirements..." 
                                              minlength="10"
                                              maxlength="2000"
                                              required>@(ViewBag.FormData?.Message ?? "")</textarea>
                                    <div class="d-flex justify-content-between">
                                        <div class="validation-hint" id="messageHint">
                                            <i class="fas fa-info-circle"></i> 10-2000 characters
                                        </div>
                                        <div class="character-count" id="charCount">0/2000</div>
                                    </div>
                                </div>
                                
                                <div class="mb-3 form-check">
                                    <input type="checkbox" class="form-check-input" id="newsletter" name="newsletter" 
                                           value="true" @(ViewBag.FormData?.Newsletter == true ? "checked" : "")>
                                    <label class="form-check-label" for="newsletter">
                                        Subscribe to our newsletter for updates and offers
                                    </label>
                                </div>
                                
                                <div class="d-grid">
                                    <button type="submit" class="btn btn-gradient-primary btn-lg" id="submitBtn">
                                        <i class="fas fa-paper-plane me-2"></i>Send Message
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="py-5 bg-primary text-white">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h3 class="fw-bold mb-3">Ready to Transform Your Business with Aerial Solutions?</h3>
                <p class="mb-0 opacity-75">Schedule a consultation with our experts today.</p>
            </div>
            <div class="col-lg-4 text-lg-end">
                <a href="#contact" class="btn btn-light btn-lg">
                    <i class="fas fa-calendar-check me-2"></i>Schedule Consultation
                </a>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        $(document).ready(function() {
            // Real-time validation functions
            function validateName(name) {
                const pattern = /^[a-zA-Z\s]{2,50}$/;
                return pattern.test(name) && name.trim().length > 0;
            }
            
            function validateEmail(email) {
                const pattern = /^[a-zA-Z0-9._%+-]+@@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
                return pattern.test(email) && email.length <= 254;
            }
            
            function validatePhone(phone) {
                if (!phone || phone.trim() === '') return true; // Optional field
                const cleanPhone = phone.replace(/[\s\-\(\)\+]/g, '');
                return /^[0-9]{10,12}$/.test(cleanPhone);
            }
            
            function validateMessage(message) {
                return message && message.length >= 10 && message.length <= 2000;
            }
            
            // Show validation hints
            function showHint(element, isValid, validMessage, invalidMessage, infoMessage) {
                const hint = $(element).siblings('.validation-hint');
                if ($(element).val().trim().length === 0 && $(element).prop('required')) {
                    hint.removeClass('valid invalid').html('<i class="fas fa-info-circle"></i> ' + infoMessage);
                } else if (!$(element).prop('required') && $(element).val().trim().length === 0) {
                    hint.removeClass('valid invalid').html('<i class="fas fa-info-circle"></i> ' + infoMessage);
                } else if (isValid) {
                    hint.removeClass('invalid').addClass('valid').html('<i class="fas fa-check-circle"></i> ' + validMessage);
                } else {
                    hint.removeClass('valid').addClass('invalid').html('<i class="fas fa-exclamation-circle"></i> ' + invalidMessage);
                }
            }
            
            // Update field styling
            function updateFieldStyle(element, isValid, optional = false) {
                if (!optional && $(element).val().trim().length === 0) {
                    $(element).removeClass('is-valid is-invalid');
                } else if (optional && $(element).val().trim().length === 0) {
                    $(element).removeClass('is-valid is-invalid');
                } else if (isValid) {
                    $(element).removeClass('is-invalid').addClass('is-valid');
                } else {
                    $(element).removeClass('is-valid').addClass('is-invalid');
                }
            }
            
            // Name validation
            $('#name').on('input', function() {
                const value = $(this).val();
                const isValid = validateName(value);
                updateFieldStyle(this, isValid);
                showHint(this, isValid, 'Valid name', 'Name must be 2-50 characters, letters and spaces only', '2-50 characters, letters and spaces only');
            });
            
            // Email validation
            $('#email').on('input', function() {
                const value = $(this).val();
                const isValid = validateEmail(value);
                updateFieldStyle(this, isValid);
                showHint(this, isValid, 'Valid email address', 'Please enter a valid email address', 'Enter a valid email address');
            });
            
            // Phone validation
            $('#phone').on('input', function() {
                let value = $(this).val();
                const isValid = validatePhone(value);
                
                updateFieldStyle(this, isValid, true);
                showHint(this, isValid, 'Valid phone number', 'Please enter a valid phone number', 'Enter a valid phone number (optional)');
            });
            
            // Service validation (optional, just for styling)
            $('#service').on('change', function() {
                const value = $(this).val();
                const hint = $('#serviceHint');
                
                if (value) {
                    $(this).removeClass('is-invalid').addClass('is-valid');
                    hint.removeClass('invalid').addClass('valid').html('<i class="fas fa-check-circle"></i> Service selected');
                } else {
                    $(this).removeClass('is-valid is-invalid');
                    hint.removeClass('valid invalid').html('<i class="fas fa-info-circle"></i> Select a service (optional)');
                }
            });
            
            // Message validation with character count
            $('#message').on('input', function() {
                const value = $(this).val();
                const length = value.length;
                const isValid = validateMessage(value);
                
                // Update character count
                const charCount = $('#charCount');
                charCount.text(length + '/2000');
                
                if (length < 10) {
                    charCount.removeClass('danger').addClass('warning');
                } else if (length > 2000) {
                    charCount.removeClass('warning').addClass('danger');
                } else {
                    charCount.removeClass('warning danger');
                }
                
                updateFieldStyle(this, isValid);
                showHint(this, isValid, 'Valid message', 'Message must be 10-2000 characters', '10-2000 characters');
            });
            
            // Check if form is valid
            function isFormValid() {
                const nameValid = validateName($('#name').val());
                const emailValid = validateEmail($('#email').val());
                const phoneValid = validatePhone($('#phone').val());
                const messageValid = validateMessage($('#message').val());
                
                return nameValid && emailValid && phoneValid && messageValid;
            }
            
            // Update submit button state
            function updateSubmitButton() {
                const isValid = isFormValid();
                $('#submitBtn').prop('disabled', !isValid);
                
                if (isValid) {
                    $('#submitBtn').css('opacity', '1').css('cursor', 'pointer');
                } else {
                    $('#submitBtn').css('opacity', '0.5').css('cursor', 'not-allowed');
                }
            }
            
            // Update button on input changes
            $('#name, #email, #phone, #message').on('input', function() {
                updateSubmitButton();
            });
            
            // Initial validation
            $('#name').trigger('input');
            $('#email').trigger('input');
            $('#phone').trigger('input');
            $('#message').trigger('input');
            $('#service').trigger('change');
            
            // Form submission
            $('#contactForm').submit(function(e) {
                e.preventDefault();
                
                if (!isFormValid()) {
                    // Highlight all invalid fields
                    if (!validateName($('#name').val())) $('#name').addClass('is-invalid');
                    if (!validateEmail($('#email').val())) $('#email').addClass('is-invalid');
                    if (!validatePhone($('#phone').val()) && $('#phone').val().trim() !== '') $('#phone').addClass('is-invalid');
                    if (!validateMessage($('#message').val())) $('#message').addClass('is-invalid');
                    
                    // Scroll to first error
                    $('html, body').animate({
                        scrollTop: $('.is-invalid:first').offset().top - 100
                    }, 500);
                    
                    return false;
                }
                
                // Show loading state
                const submitBtn = $('#submitBtn');
                submitBtn.html('<i class="fas fa-spinner fa-spin me-2"></i>Sending...').prop('disabled', true);
                
                // Submit form
                this.submit();
            });
            
            // Existing code for smooth scroll, counter animation, carousel etc.
            // Smooth scroll for navigation
            $('a[href^="#"]').on('click', function(e) {
                e.preventDefault();
                var target = $(this).attr('href');
                if (target === '#') return;
                
                $('html, body').animate({
                    scrollTop: $(target).offset().top - 80
                }, 800);
            });
            
            // Counter animation for stats
            if ($('.stats-section').length) {
                $('.stat-number').each(function() {
                    var $this = $(this);
                    var countTo = $this.text().replace(/[^0-9]/g, '');
                    
                    $({ countNum: 0 }).animate({
                        countNum: countTo
                    }, {
                        duration: 2000,
                        easing: 'swing',
                        step: function() {
                            $this.text(Math.floor(this.countNum) + $this.text().replace(/[0-9]/g, ''));
                        },
                        complete: function() {
                            $this.text(this.countNum + $this.text().replace(/[0-9]/g, ''));
                        }
                    });
                });
            }
            
            // ===== DRONE SUVICHA CAROUSEL (3 CARDS PER ROW) =====
            $(function() {
                if ($('#servicesCarousel').length) {
                    console.log('Carousel found. Initializing...');
                    
                    const carousel = $('#servicesCarousel');
                    const slides = $('.carousel-slide');
                    const dots = $('.carousel-dot');
                    let currentIndex = 0;
                    const slidesPerView = 3;
                    const totalSlides = slides.length;
                    const totalGroups = Math.ceil(totalSlides / slidesPerView);
                    let autoSlideInterval;
                    
                    // Function to update carousel
                    function updateCarousel() {
                        console.log('Updating carousel to group:', currentIndex);
                        
                        // Calculate slide width for 3 cards per row
                        const slideWidth = 100 / slidesPerView;
                        const translateX = -currentIndex * 100; // Move by 100% per group
                        
                        carousel.css('transform', `translateX(${translateX}%)`);
                        
                        // Update active state for cards in current group
                        slides.removeClass('center');
                        const startIndex = currentIndex * slidesPerView;
                        const endIndex = Math.min(startIndex + slidesPerView, totalSlides);
                        
                        for (let i = startIndex; i < endIndex; i++) {
                            slides.eq(i).addClass('center');
                        }
                        
                        // Update dots
                        dots.removeClass('active');
                        dots.eq(currentIndex).addClass('active');
                    }
                    
                    // Next slide function
                    function nextSlide() {
                        console.log('Moving to next group');
                        currentIndex = (currentIndex + 1) % totalGroups;
                        updateCarousel();
                    }
                    
                    // Previous slide function
                    function prevSlide() {
                        console.log('Moving to previous group');
                        currentIndex = (currentIndex - 1 + totalGroups) % totalGroups;
                        updateCarousel();
                    }
                    
                    // Go to specific slide group
                    function goToSlide(index) {
                        console.log('Going to group:', index);
                        currentIndex = index;
                        updateCarousel();
                    }
                    
                    // Auto slide function
                    function startAutoSlide() {
                        console.log('Starting auto slide');
                        stopAutoSlide();
                        autoSlideInterval = setInterval(nextSlide, 4000);
                    }
                    
                    function stopAutoSlide() {
                        console.log('Stopping auto slide');
                        clearInterval(autoSlideInterval);
                    }
                    
                    // Initialize and Start
                    updateCarousel();
                    startAutoSlide();
                    
                    // ===== EVENT HANDLERS =====
                    $(document).on('click', '#carouselNext', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        stopAutoSlide();
                        nextSlide();
                        startAutoSlide();
                    });
                    
                    $(document).on('click', '#carouselPrev', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        stopAutoSlide();
                        prevSlide();
                        startAutoSlide();
                    });
                    
                    $(document).on('click', '.carousel-dot', function() {
                        const slideIndex = parseInt($(this).data('slide'));
                        stopAutoSlide();
                        goToSlide(slideIndex);
                        startAutoSlide();
                    });
                    
                    // Pause on Hover
                    $('#carouselWrapper').on('mouseenter', function() {
                        stopAutoSlide();
                    }).on('mouseleave', function() {
                        startAutoSlide();
                    });
                    
                    // Handle window resize
                    $(window).on('resize', function() {
                        // Update for responsive behavior
                        updateCarousel();
                    });
                    
                    // Make sure buttons are clickable
                    $('#carouselNext, #carouselPrev').css({
                        'cursor': 'pointer',
                        'pointer-events': 'auto'
                    });
                    
                    console.log('Carousel initialized successfully with', totalSlides, 'slides in', totalGroups, 'groups');
                }
            });
        });
    </script>
}